(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9b50cf0"],{"01f7":function(e,t,n){e.exports=n("b3b4")},"0276":function(e,t,n){"use strict";var r=n("dd92");function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},"0a68":function(e,t,n){(function(t){const r=n("1deb"),o=t.Bmob||{};o.utils=r,o._config=r.getConfig(),o.initialize=(e,t,n)=>{t.length>6&&console.warn("Bmob初始化失败，2.0以上版本SDK请使用API安全码初始化，文档地址：https://bmob.github.io/hydrogen-js-sdk/#/?id=初始化"),o._config.secretKey=e,o._config.securityCode=t,o._config.applicationMasterKey=n},o.debug=e=>{o._config.deBug=e,o._config=r.getConfig(e)},e.exports=o}).call(this,n("c8ba"))},"0c10":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"1deb":function(e,t,n){(function(t){let r;r=n("fd6c");const o=(e=!1)=>(!0===e&&(r.host=n("2e18").host),r),i=()=>{const e=o();let n;return"undefined"!==typeof wx&&(n="wx"),"undefined"!==typeof window&&"string"!==typeof n&&(n="h5"),"undefined"!==typeof t&&"string"!==typeof n&&(n="nodejs"),3===e.type&&"string"!==typeof n&&(n="hap"),n},s=()=>{let e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="";for(let n=0;n<16;n++){let n=parseInt(61*Math.random());t+=e[n]}return t};e.exports={randomString:s,getConfig:o,getAppType:i}}).call(this,n("4362"))},"26ff":function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),s="",a=0,c=r;i.charAt(0|a)||(c="=",a%1);s+=c.charAt(63&t>>8-a%1*8)){if(n=i.charCodeAt(a+=3/4),n>255)throw new o;t=t<<8|n}return s}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=i},2816:function(e,t){const n=e=>"[object Object]"===Object.prototype.toString.call(e),r=e=>"[object Number]"===Object.prototype.toString.call(e),o=e=>"[object String]"===Object.prototype.toString.call(e),i=e=>"[object Undefined]"===Object.prototype.toString.call(e),s=e=>"[object Boolean]"===Object.prototype.toString.call(e),a=e=>"[object Array]"===Object.prototype.toString.call(e),c=e=>"[object Function]"===Object.prototype.toString.call(e);e.exports={isObject:n,isNumber:r,isString:o,isUndefined:i,isBoolean:s,isArray:a,isFunction:c}},"2a0b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},"2b6d":function(e,t,n){const r=n("1deb");let o;const i=r.getAppType();"h5"===i?o=n("578c"):"wx"===i?o=n("6609"):"hap"===i?o=n("a335"):"nodejs"===i&&(o=n("7480")),e.exports=o},"2e18":function(e,t){const n="https://apitest.bmob.cn",r="",o="",i=1,s=1,a={GENERATECODE:"/1/wechatApp/qr/generatecode",GETACCESSTOKEN:"/1/wechatApp/getAccessToken",SENDWEAPPMESSAGE:"/1/wechatApp/SendWeAppMessage",NOTIFYMSG:"/1/wechatApp/notifyMsg",REFUND:"/1/pay/refund",REQUESTSMSCODE:"/1/requestSmsCode",VERIFYSMSCODE:"/1/verifySmsCode",FUNCTIONS:"/1/functions",REQUESTPASSWORDRESET:"/1/requestPasswordReset",RESETPASSWORDBYSMSCODE:"/1/resetPasswordBySmsCode",UPDATEUSERPASSWORD:"/1/updateUserPassword",PUSH:"/1/push",FILES:"/2/files",FILESCHECK:"/1/wechatApp/checkImg",DELFILES:"/2/cdnBatchDelete",TIMESTAMP:"/1/timestamp",LOGIN:"/1/login",REGISTER:"/1/users",REQUEST_EMAIL_VERIFY:"/1/requestEmailVerify",USERS:"/1/users",PAY:"/1/pay",WECHAT_APP:"/1/wechatApp/",BATCH:"/1/batch",CHECK_MSG:"/1/wechatApp/checkMsg",DECRYPTION:"/1/wechatApp/decryption",QUERY:"/1/classes"};e.exports={host:n,applicationId:r,applicationKey:o,parameters:a,version:i,serverVersion:10,deBug:!1,type:s}},"2faa":function(e,t,n){"use strict";var r=n("dd92");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},"31e5":function(e,t,n){const{isString:r,isArray:o}=n("2816"),i=n("dc91"),s=class{constructor(e){if(!r(e))throw new i(415);this.tableName=e}add(e){return a.call(this,e,"AddRelation")}remove(e){return a.call(this,e,"RemoveRelation")}};function a(e,t){if(r(e))return{__op:t,objects:[{__type:"Pointer",className:this.tableName,objectId:e}]};if(o(e)){const n=[];return e.map(e=>{if(!r(e))throw new i(415);n.push({__type:"Pointer",className:this.tableName,objectId:e})}),{__op:t,objects:n}}throw new i(415)}e.exports=s},3726:function(e,t,n){const{isString:r}=n("2816"),o=n("dc91"),i=class{constructor(e){if(!r(e))throw new o(415);this.tableName=e}set(e){if(!r(e))throw new o(415);return{__type:"Pointer",className:this.tableName,objectId:e}}};e.exports=i},"41f3":function(e,t,n){let r=n("0a68"),o=n("bdcb");const i="xxrequire('@system.fetch')xx",s=(e,t,n,i)=>{const s=Math.round((new Date).getTime()/1e3),a=r.utils.randomString();let c="get"===n||"delete"===n?"":JSON.stringify(i);const u=o.utf8MD5(t+s+e.securityCode+a+c+e.serverVersion);let l={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Safe-Sign":u,"X-Bmob-Safe-Timestamp":s,"X-Bmob-Noncestr-Key":a,"X-Bmob-SDK-Version":e.serverVersion,"X-Bmob-Secret-Key":e.secretKey};return e.applicationMasterKey&&(l["X-Bmob-Master-Key"]=e.applicationMasterKey),l},a=(e,t="get",o={})=>new Promise((a,c)=>{const u=s(r._config,e,t,o);void 0===r.User&&(r=n("0a68"));let l=r.User.current();l&&(u["X-Bmob-Session-Token"]=l.sessionToken),"object"===typeof o&&(o=JSON.stringify(o)),i.fetch({url:r._config.host+e,header:u,method:t,data:o,success:function(e){const t=JSON.parse(e.data);t.code&&c(t),a(t)},fail:function(e,t){console.log("handling fail, code = "+t),c(e)}})});e.exports=a},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"45ad":function(e,t,n){"use strict";var r=n("9c0c");e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},4677:function(e,t,n){"use strict";var r=n("e26f"),o=n("dd92"),i=n("fbc7"),s=n("d357");function a(e){this.defaults=e,this.interceptors={request:new i,response:new i}}a.prototype.request=function(e){"string"===typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(r,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],n=Promise.resolve(e);this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));while(t.length)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],(function(e){a.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}})),o.forEach(["post","put","patch"],(function(e){a.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}})),e.exports=a},"578c":function(e,t,n){const{isString:r}=n("2816");let o;o="undefined"!==typeof cc?cc.sys.localStorage:localStorage;const i={save(e,t){if(!r(e)||!t)throw new Error(415);o.setItem(e,JSON.stringify(t))},fetch(e){if(!r(e))throw new Error(415);return JSON.parse(o.getItem(e))||null},remove(e){if(!r(e))throw new Error(415);o.removeItem(e)},clear(){o.clear()}};e.exports=i},"59bb":function(e,t,n){const r=n("f5a5");let o=n("0a68");const i=n("dc91"),s=n("1deb");let a=n("bdcb");const c="xxrequire('@system.request')xx",{isString:u,isArray:l}=n("2816");let f=[];class h{constructor(e,t){if(e&&t){if(!u(e))throw new i(415);let n=e.substring(e.lastIndexOf(".")+1);f.push({name:e,route:`${o._config.parameters.FILES}/${o._config.secretKey}.${n}`,data:t})}}fileUpload(e=""){let t=this;return new Promise((r,i)=>{void 0===o.User&&(o=n("0a68"));let s="bmob",c=o.User.current();c&&(s=c.sessionToken);const u=[],l=Math.round((new Date).getTime()/1e3),h=o.utils.randomString();let p=f[0].route;"wxc"===e&&(p=p.replace(o._config.parameters.FILES,o._config.parameters.FILESCHECK));const d=a.utf8MD5(p+l+o._config.securityCode+h),m={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Safe-Sign":d,"X-Bmob-Safe-Timestamp":l,"X-Bmob-Noncestr-Key":h,"X-Bmob-Session-Token":s,"X-Bmob-Secret-Key":o._config.secretKey},g=Object.assign({_ContentType:"text/plain",mime_type:"text/plain",category:"wechatApp",_ClientVersion:"js3.6.1",_InstallationId:"bmob"},m);for(let n of f){let s=n.route;"wxc"===e&&(s=n.route.replace(o._config.parameters.FILES,o._config.parameters.FILESCHECK)),console.log(n.route,o._config.parameters.FILESCHECK,"ror"),wx.uploadFile({url:o._config.host+s,filePath:n.data,name:"file",header:m,formData:g,success:function(n){let o=JSON.parse(n.data);"wxc"===e?"ok"===o.msg?r(t.fileUpload()):i(o):(u.push(o),u.length===f.length&&(f=[],r(u),i(u)))},fail:function(e){u.push(e)}})}})}imgSecCheck(){if(!f.length)throw new i(417);return this.fileUpload("wxc")}save(){if(!f.length)throw new i(417);let e;const t=s.getAppType();if("h5"===t||"nodejs"===t)e=new Promise((e,t)=>{const n=[];for(let o of f)r(o.route,"post",o.data).then(r=>{n.push(r),n.length===f.length&&(f=[],e(n),t(n))}).catch(e=>{n.push(e)})});else{if("wx"===t){if(!f.length)throw new i(417);return this.fileUpload("wx")}"hap"===t&&(e=new Promise((e,t)=>{void 0===o.User&&(o=n("0a68"));let r="bmob",i=o.User.current();i&&(r=i.sessionToken);const s=[],u=Math.round((new Date).getTime()/1e3),l=o.utils.randomString(),h=f[0].route;console.log("rand",l,o,h);const p=a.utf8MD5(h+u+o._config.securityCode+l),d={"content-type":"application/json","X-Bmob-SDK-Type":"wechatApp","X-Bmob-Safe-Sign":p,"X-Bmob-Safe-Timestamp":u,"X-Bmob-Noncestr-Key":l,"X-Bmob-Session-Token":r,"X-Bmob-Secret-Key":o._config.secretKey},m=Object.assign({_ContentType:"text/plain",mime_type:"text/plain",category:"wechatApp",_ClientVersion:"js3.6.1",_InstallationId:"bmob"},d);for(let n of f)c.upload({url:o._config.host+n.route,files:[{uri:n.data,name:"file",filename:n.name}],header:{"X-Bmob-SDK-Type":"wechatApp"},data:m,success:function(n){console.log("handling success"+s);let r=n.data;s.push(r),s.length===f.length&&(f=[],e(s),t(s))},fail:function(e,t){console.log("handling fail, code = "+t)}})}))}return e}destroy(e){if(u(e))return r(`${o._config.parameters.FILES}/upyun/${e.split(".com/")[1]}`,"delete");if(l(e)){const t=[];return e.map(e=>{t.push(e.split(".com/")[1])}),r(o._config.parameters.DELFILES,"post",{upyun:t})}throw new i(415)}}e.exports=h},6609:function(e,t,n){const{isString:r,isObject:o}=n("2816"),i={save(e,t){if(!r(e)||!t)throw new Error(415);return t=o(t)?JSON.stringify(t):t,wx.setStorageSync(e,t)},fetch(e){if(!r(e))throw new Error(415);return wx.getStorageSync(e)||null},remove(e){if(!r(e))throw new Error(415);return wx.removeStorageSync(e)},clear(){return wx.clearStorageSync()}};e.exports=i},"6d7c":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},7480:function(e,t){const n={save(e,t){},fetch(e){return null},remove(e){},clear(){}};e.exports=n},"74be":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("短链")]),n("div",[n("Input",{staticStyle:{width:"200px"},attrs:{type:"url"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}),n("Button",{attrs:{disabled:e.saveBtnDisabled},on:{click:e.save}},[e._v("生成")])],1),n("div",[n("span",{directives:[{name:"show",rawName:"v-show",value:this.saveing,expression:"this.saveing"}]},[e._v("生成中...")]),n("a",{directives:[{name:"show",rawName:"v-show",value:!this.saveing,expression:"!this.saveing"}],attrs:{href:e.shortURL,target:"_blank"}},[e._v(e._s(e.shortURL))]),n("h3",[e._v("最近生成：")]),n("ul",e._l(e.shorts,(function(t,r){return n("li",{key:r},[n("a",{attrs:{href:t,target:"_blank"}},[e._v(e._s(t))])])})),0)])])},o=[];n("99af"),n("c975"),n("ac1f"),n("5319"),n("96cf"),n("d3b7");function i(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,c,"next",e)}function c(e){i(s,r,o,a,c,"throw",e)}a(void 0)}))}}var a=n("01f7"),c=n.n(a),u=n("901e"),l=n.n(u),f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",h={name:"ShortChain",data:function(){return{url:"",shortURL:"",shorts:[],saveing:!1}},created:function(){c.a.initialize("4805f4f0a0b329e5","Qw68@#"),c.a.debug(!1);var e=localStorage.getItem(this.shortsKey());null!=e&&(this.shorts=this.shorts.concat(JSON.parse(e)))},computed:{saveBtnDisabled:function(){return 0==this.url.length}},methods:{shortsKey:function(){return this.$route.path+":shortsKey"},save:function(){var e=this;return s(regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.saveing=!0,n=c.a.Query("ShortChain"),n.set("url",e.url),t.next=5,n.save();case 5:return r=t.sent,t.next=8,n.get(r.objectId);case 8:return o=t.sent,console.log(o),i=e.tenToOther(o.index,f),o.set("chain",i),t.next=14,o.save();case 14:e.shortURL="https://526t.cn/a?"+i,e.saveing=!1,e.shorts.unshift(e.shortURL),e.shorts.length>10&&e.shorts.pop(),localStorage.setItem(e.shortsKey(),JSON.stringify(e.shorts));case 19:case"end":return t.stop()}}),t)})))()},otherToTen:function(e,t){for(var n=new l.a(0),r=e.length,o=0;o<r;o++){var i=e.charAt(o);if(t.indexOf(i)<0)throw"输入有误";var s=new l.a(t.indexOf(i)),a=new l.a(t.length),c=s.times(a.exponentiatedBy(r-o-1));n=n.plus(c)}return n.toFormat().replace(/,/g,"")},tenToOther:function(e,t){var n=new l.a(e),r=n,o="";while(r>=t.length)o=t.charAt(r.mod(t.length))+o,r=r.idiv(t.length);return o=t.charAt(r)+o,o}}},p=h,d=n("2877"),m=Object(d["a"])(p,r,o,!1,null,"44a5a644",null);t["default"]=m.exports},"793e":function(e,t,n){"use strict";var r=n("dd92");e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},"79aa":function(e,t,n){"use strict";var r=n("dd92"),o=n("2a0b"),i=n("4677"),s=n("e26f");function a(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=a(s);c.Axios=i,c.create=function(e){return a(r.merge(s,e))},c.Cancel=n("981d"),c.CancelToken=n("914d"),c.isCancel=n("0c10"),c.all=function(e){return Promise.all(e)},c.spread=n("6d7c"),e.exports=c,e.exports.default=c},8418:function(e,t,n){"use strict";var r=n("c04e"),o=n("9bf2"),i=n("5c6c");e.exports=function(e,t,n){var s=r(t);s in e?o.f(e,s,i(0,n)):e[s]=n}},8858:function(e,t,n){let r=n("0a68"),o=n("bdcb"),i="wechatApp";"undefined"!==typeof tt?i="toutiao":"undefined"!==typeof qq&&(i="qqApp");const s=(e,t,n,s)=>{const a=Math.round((new Date).getTime()/1e3),c=r.utils.randomString();let u="get"===n||"delete"===n?"":JSON.stringify(s);const l=o.utf8MD5(t+a+e.securityCode+c+u+e.serverVersion);let f={"content-type":"application/json","X-Bmob-SDK-Type":i,"X-Bmob-Safe-Sign":l,"X-Bmob-Safe-Timestamp":a,"X-Bmob-Noncestr-Key":c,"X-Bmob-SDK-Version":e.serverVersion,"X-Bmob-Secret-Key":e.secretKey};return e.applicationMasterKey&&(f["X-Bmob-Master-Key"]=e.applicationMasterKey),f},a=(e,t="get",o={})=>new Promise((i,a)=>{const c=s(r._config,e,t,o);void 0===r.User&&(r=n("0a68"));let u=r.User.current();u&&(c["X-Bmob-Session-Token"]=u.sessionToken),!0===r._config.deBug&&(console.log("host:",r._config.host),console.log("parma:",o)),wx.request({url:r._config.host+e,method:t,data:o,header:c,success:e=>{(e.data.code&&e.data.error||e.data.error)&&a(e.data),i(e.data)},fail:e=>{console.log(e),a(e)}})});e.exports=a},"8f1f":function(e,t,n){let r=n("0a68");const o=n("f5a5"),{isObject:i,isString:s,isNumber:a,isUndefined:c,isArray:u}=n("2816"),l=n("dc91"),f=n("2b6d"),h=class{constructor(e){this.tableName=`${r._config.parameters.QUERY}/${e}`,this.className=e,this.init(),this.addArray={},this.setData={}}init(){this.queryData={},this.location={},this.andData={},this.orData={},this.stat={},this.limitNum=100,this.skipNum=0,this.includes="",this.queryReilation={},this.orders=null,this.keys=null}get(e){if(!s(e))throw new l(415);let t={};const n={},r={},i={},h=(e,t)=>{if(!s(e)||!u(t))throw new l(415);i[e]={__op:"Add",objects:t}},p=(e,t)=>{if(!s(e)||!u(t))throw new l(415);i[e]={__op:"AddUnique",objects:t}},d=(e,t)=>{if(!s(e)||!u(t))throw new l(415);i[e]={__op:"Remove",objects:t}},m=(e,t=1)=>{if(!s(e)||!a(t))throw new l(415);n[e]={__op:"Increment",amount:t}},g=t=>{if(!s(e))throw new l(415);r[t]={__op:"Delete"}},w=(e,n)=>{if(!s(e)||c(n))throw new l(415);const{filename:r,cdn:o,url:i}=n;c(r)||c(o)||c(i)?t[e]=n:t[e]={__type:"File",group:o,filename:r,url:i}},y=()=>{const s=Object.assign(r,t,n,i);return"_User"===this.className?new Promise((t,n)=>{o(`${this.tableName}/${e}`,"put",s).then(e=>{const n=this.current();let r=Object.assign(n,s);f.save("bmob",r),t(e)}).catch(e=>{n(e)})}):o(`${this.tableName}/${e}`,"put",s)},b={};return""!==this.includes&&(b.include=this.includes),new Promise((t,n)=>{o(`${this.tableName}/${e}`,"get",b).then(n=>{Object.defineProperty(n,"set",{value:w}),Object.defineProperty(n,"unset",{value:g}),Object.defineProperty(n,"save",{value:y}),Object.defineProperty(n,"increment",{value:m}),Object.defineProperty(n,"add",{value:h}),Object.defineProperty(n,"remove",{value:d}),Object.defineProperty(n,"addUnique",{value:p}),Object.defineProperty(n,"destroy",{value:()=>this.destroy(e)}),t(n)}).catch(e=>{n(e)})})}destroy(e){if(!s(e))throw new l(415);return o(`${this.tableName}/${e}`,"delete")}set(e,t){if(!s(e)||c(t))throw new l(415,e+"字段参数,类型不正确");const{filename:n,cdn:r,url:o}=t;c(n)||c(r)||c(o)?this.setData[e]=t:this.setData[e]={__type:"File",group:r,filename:n,url:o}}add(e,t){if(!s(e)||!u(t))throw new l(415);this.addArray[e]={__op:"Add",objects:t}}addUnique(e,t){if(!s(e)||!u(t))throw new l(415);this.addArray[e]={__op:"AddUnique",objects:t}}current(){if("hap"!==r.type){const e=f.fetch("bmob");return"object"===typeof e?e:JSON.parse(e)}return new Promise((e,t)=>f.fetch("bmob").then(t=>{e(t)}).catch(e=>{t(e)}))}updateStorage(e){if(!s(e))throw new l(415);return new Promise((t,n)=>{const r=this.current();if(!r)throw new l(415);this.get(e).then(e=>{let n=Object.assign(r,e);f.save("bmob",n),t(e)}).catch(e=>{console.log(e),n(e)})})}save(e={}){if(!i(e))throw new l(415);let t=this.setData.id?"PUT":"POST",n=this.setData.id?this.setData.id:"";delete this.setData.id;let r=Object.assign(e,this.setData,this.addArray);return new Promise((e,i)=>{o(`${this.tableName}/${n}`,t,r).then(t=>{if(this.addArray={},this.setData={},"_User"===this.className){const e=this.current();let t=Object.assign(e,r);f.save("bmob",t)}e(t)}).catch(e=>{i(e)})})}saveAll(e){if(!u(e))throw new l(415);if(e.length<1)throw new l(416);let t,n,i="put",s=[];e.map(e=>(t="/"+e.objectId,"/undefined"===t&&(t="",i="post"),n={method:i,path:`${this.tableName}${t}`,body:e.setData},s.push(n),e));let a={requests:s},c=r._config.parameters.BATCH;return o(c,"POST",a)}withinKilometers(e,{latitude:t,longitude:n},r=100){let o={};return o[e]={$nearSphere:{__type:"GeoPoint",latitude:t,longitude:n},$maxDistanceInKilometers:r},this.location=o,o}withinGeoBox(e,{latitude:t,longitude:n},r){let o={};return o[e]={$within:{$box:[{__type:"GeoPoint",latitude:t,longitude:n},{__type:"GeoPoint",latitude:r.latitude,longitude:r.longitude}]}},this.location=o,o}statTo(e,t){if(!s(e))throw new l(415);return this.stat[e]=t,this.stat}equalTo(e,t,n){if(!s(e))throw new l(415);const r=(e,t,n)=>{let r={},o=null;switch(o="createdAt"===e||"updateAt"===e?{__type:"Date",iso:n}:n,t){case"==":r[e]=o;break;case"===":r[e]=o;break;case"!=":r[e]={$ne:o};break;case"<":r[e]={$lt:o};break;case"<=":r[e]={$lte:o};break;case">":r[e]={$gt:o};break;case">=":r[e]={$gte:o};break;default:throw new l(415)}return r},o=r(e,t,n);return Object.keys(this.queryData).length?c(this.queryData.$and)?this.queryData={$and:[this.queryData,o]}:this.queryData.$and.push(o):this.queryData=o,o}containedIn(e,t){if(!s(e)||!u(t))throw new l(415);return p.call(this,e,"$in",t)}notContainedIn(e,t){if(!s(e)||!u(t))throw new l(415);return p.call(this,e,"$nin",t)}exists(e){if(!s(e))throw new l(415);return p.call(this,e,"$exists",!0)}doesNotExist(e){if(!s(e))throw new l(415);return p.call(this,e,"$exists",!1)}or(...e){e.map((e,t)=>{if(!i(e))throw new l(415)});const t=this.queryData.$and;if(!c(t)){for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)JSON.stringify(t[n])===JSON.stringify(e[r])&&this.queryData.$and.splice(n,1);t.length||delete this.queryData.$and}this.orData={$or:e}}and(...e){e.map((e,t)=>{if(!i(e))throw new l(415)}),this.andData={$and:e}}limit(e){if(!a(e))throw new l(415);e>1e3&&(e=1e3),this.limitNum=e}skip(e){if(!a(e))throw new l(415);this.skipNum=e}order(...e){e.map(e=>{if(!s(e))throw new l(415)}),this.orders=e.join(",")}include(...e){e.map(e=>{if(!s(e))throw new l(415)}),this.includes=e.join(",")}select(...e){e.map(e=>{if(!s(e))throw new l(415)}),this.keys=e.join(",")}field(e,t){if(!s(e)||!s(t))throw new l(415);this.queryReilation.where={$relatedTo:{object:{__type:"Pointer",className:this.className,objectId:t},key:e}}}relation(e){if(!s(e))throw new l(415);e="_User"===e?"users":"classes/"+e,this.queryReilation.count=1;let t=Object.assign(this.getParams(),this.queryReilation);return new Promise((n,r)=>{o("/1/"+e,"get",t).then(e=>{n(e)}).catch(e=>{r(e)})})}getParams(){let e={};Object.keys(this.queryData).length&&(e.where=this.queryData),Object.keys(this.location).length&&(e.where=Object.assign(this.location,this.queryData)),Object.keys(this.andData).length&&(e.where=Object.assign(this.andData,this.queryData)),Object.keys(this.orData).length&&(e.where=Object.assign(this.orData,this.queryData)),e.limit=this.limitNum,e.skip=this.skipNum,e.include=this.includes,e.order=this.orders,e.keys=this.keys,Object.keys(this.stat).length&&(e=Object.assign(e,this.stat));for(const t in e)(e.hasOwnProperty(t)&&null===e[t]||0===e[t]||""===e[t])&&delete e[t];return e}find(){let e={},t={};const n=this.getParams(),i=(t,n)=>{if(!t||c(n))throw new l(415);e[t]=n},s=(n="updata")=>{if(console.log(n),t.length<1)throw new l(416);let i,s,a="put",c=[];t.map(t=>(i="/"+t.objectId,"/undefined"===i&&(i="",a="post"),s={method:a,path:`${this.tableName}${i}`,body:e},"delete"===n&&(s={method:"DELETE",path:`${this.tableName}${i}`}),c.push(s),t));let u={requests:c},f=r._config.parameters.BATCH;return o(f,"POST",u)};return new Promise((e,r)=>{o(""+this.tableName,"get",n).then(r=>{let o=r.results;n.hasOwnProperty("count")&&(o=r),this.init(),Object.defineProperty(o,"set",{value:i}),Object.defineProperty(o,"saveAll",{value:()=>s()}),Object.defineProperty(o,"destroyAll",{value:()=>s("delete")}),t=o,e(o)}).catch(e=>{r(e)})})}count(e=0){const t={};return Object.keys(this.queryData).length&&(t.where=this.queryData),Object.keys(this.andData).length&&(t.where=Object.assign(this.andData,this.queryData)),Object.keys(this.orData).length&&(t.where=Object.assign(this.orData,this.queryData)),t.count=1,t.limit=e,new Promise((e,n)=>{o(this.tableName,"get",t).then(({count:t})=>{e(t)}).catch(e=>{n(e)})})}};function p(e,t,n){let r={},o={};o[t]=n,r[e]=o;let i=r;return Object.keys(this.queryData).length?c(this.queryData.$and)?this.queryData={$and:[this.queryData,i]}:this.queryData.$and.push(i):this.queryData=i,i}e.exports=h},"914d":function(e,t,n){"use strict";var r=n("981d");function o(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e,t=new o((function(t){e=t}));return{token:t,cancel:e}},e.exports=o},"94a7":function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"96cf":function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new T(r||[]);return i._invoke=D(e,n,s),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",m={};function g(){}function w(){}function y(){}var b={};b[i]=function(){return this};var v=Object.getPrototypeOf,S=v&&v(v(P([])));S&&S!==n&&r.call(S,i)&&(b=S);var E=y.prototype=g.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,i,s,a){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var o;function i(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function D(e,t,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return N()}n.method=o,n.arg=i;while(1){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?d:h,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function P(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){while(++o<e.length)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:N}}function N(){return{value:t,done:!0}}return w.prototype=E.constructor=y,y.constructor=w,w.displayName=c(y,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,a,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},x(_.prototype),_.prototype[s]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new _(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(E),c(E,a,"Generator"),E[i]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},"981d":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"99af":function(e,t,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("e8b5"),s=n("861d"),a=n("7b0b"),c=n("50c4"),u=n("8418"),l=n("65f0"),f=n("1dde"),h=n("b622"),p=n("2d00"),d=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",w=p>=51||!o((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),y=f("concat"),b=function(e){if(!s(e))return!1;var t=e[d];return void 0!==t?!!t:i(e)},v=!w||!y;r({target:"Array",proto:!0,forced:v},{concat:function(e){var t,n,r,o,i,s=a(this),f=l(s,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?s:arguments[t],b(i)){if(o=c(i.length),h+o>m)throw TypeError(g);for(n=0;n<o;n++,h++)n in i&&u(f,h,i[n])}else{if(h>=m)throw TypeError(g);u(f,h++,i)}return f.length=h,f}})},"9a82":function(e,t,n){"use strict";var r=n("dd92"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},"9c0c":function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},"9fdd":function(e,t,n){"use strict";var r=n("dd92");e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},a094:function(e,t,n){const r=n("f5a5"),o=n("2b6d"),i=n("8f1f"),s=n("0a68"),a=n("dc91"),{isObject:c,isString:u,isNumber:l}=n("2816"),f=class extends i{constructor(){const e="_User";super(e)}set(e,t=""){u(e)&&(this.setData[e]=t)}requestEmailVerify(e){if(!u(e))throw new a(415);this.setData=Object.assign({},{email:e}),console.log(this.setData);const t=s._config.parameters.REQUEST_EMAIL_VERIFY;return r(t,"post",this.setData)}register(e){if(!c(e))throw new a(415);this.setData=Object.assign({},e);const t=s._config.parameters.REGISTER;return r(t,"post",this.setData)}login(e,t){if(!u(e)||!u(t))throw new a(415);this.setData=Object.assign({},{username:e,password:t});const n=s._config.parameters.LOGIN;return new Promise((e,t)=>{r(n,"get",this.setData).then(t=>{o.save("bmob",t),e(t)}).catch(e=>{t(e)})})}logout(){o.clear()}users(){const e=s._config.parameters.USERS;return r(e,"get")}decryption(e){let t=this;return new Promise((n,o)=>{const i=e.iv?e.iv:e.detail.iv,a=e.encryptedData?e.encryptedData:e.detail.encryptedData,c=t.current();let u;u="undefined"!==typeof tt?c.authData.toutiao.session_key:"undefined"!==typeof qq?c.authData.qqapp.session_key:c.authData.weapp.session_key;const l={sessionKey:u,encryptedData:a,iv:i},f=s._config.parameters.DECRYPTION;r(f,"POST",l).then(e=>{n(e)}).catch(e=>{o(e)})})}signOrLoginByMobilePhone(e,t){if(!l(e)||!l(t))throw new a(415);this.setData=Object.assign({},{mobilePhoneNumber:e,smsCode:t});const n=s._config.parameters.LOGIN;return r(n,"get",this.setData)}requestOpenId(e,t=""){const n=s._config.parameters.WECHAT_APP;return r(n+e,"POST",{anonymous_code:t})}linkWith(e){let t={authData:e};const n=s._config.parameters.USERS;return r(n,"POST",t)}loginWithWeapp(e,t="",n){return new Promise((r,o)=>{this.requestOpenId(e,t).then(e=>{let t={weapp:e};if("undefined"!==typeof tt&&(delete e.error,t={toutiao:e}),"undefined"!==typeof qq&&(delete e.errcode,delete e.errmsg,t={qqapp:e}),"openid"===n)r(e);else{const e=this.linkWith(t);r(e)}}).catch(e=>{o(e)})})}upInfo(e){if(!c(e))throw new a(415);return new Promise((t,n)=>{let r=e.nickName,i=e.avatarUrl,s=this.current();if(!s)throw new a(415);let c=o.fetch("openid");this.get(s.objectId).then(e=>{e.set("nickName",r),e.set("userPic",i),e.set("openid",c),e.save().then(e=>{t(e)}).catch(e=>{console.log(e),n(e)})}).catch(e=>{console.log(e),n(e)})})}openId(){this.auth("openid")}auth(e=""){let t=this;return new Promise((n,r)=>{const i=()=>{wx.login({success:i=>{let s="";"undefined"!==typeof tt&&(s=i.anonymousCode),t.loginWithWeapp(i.code,s,e).then(e=>{if(e.error)throw new a(415);let t;t="undefined"!==typeof tt?e.authData.toutiao.openid:"undefined"!==typeof qq?e.authData.qqapp.openid:e.authData.weapp.openid,o.save("openid",t),o.save("bmob",e),n(e)},(function(e){r(e)}))}})};wx.checkSession({success:function(){let e=t.current();if(null===e){const e="登陆错误，请在Bmob后台填写小程序AppSecret。";r(e)}n(e),i()},fail:()=>{i()}})})}};e.exports=f},a335:function(e,t,n){const{isString:r}=n("2816"),o="xxrequire('@system.storage')xx",i={save(e,t){if(!r(e)||!t)throw new Error(415);o.set({key:e,value:JSON.stringify(t),success:function(e){return console.log("handling success"),e},fail:function(e,t){console.log("handling fail, code = "+t)}})},fetch(e){if(!r(e))throw new Error(415);return new Promise((t,n)=>o.get({key:e,success:function(e){t(e||null)},fail:function(e,t){console.log("handling fail, code = "+t),n(e)}}))},remove(e){if(!r(e))throw new Error(415);o.delete({key:e,success:function(e){console.log("handling success")},fail:function(e,t){console.log("handling fail, code = "+t)}})},clear(){o.clear({success:function(e){console.log("handling success")},fail:function(e,t){console.log("handling fail, code = "+t)}})}};e.exports=i},a57c:function(t,n,r){const o=r("dc91"),i={setup(e){let t=[];Object.assign(e,{on(e,n){"function"===typeof n&&t.push([e,n])},emit(e,...n){t.forEach(([t,r])=>e===t&&r(...n))},removeAllListeners(){t=[]}})}};t.exports=class{constructor(e=""){if(""===e)throw new o(415);this.config={host:"wss.bmobcloud.com"},i.setup(this.emitter={}),this.applicationId=e,this.initialize()}handshake(){function t(e){if(!(e instanceof o))return e.split(":")[0];self.connecting=!1,self.onError(e.message)}let n="https://"+this.config.host+"/socket.io/1/?t="+(new Date).getTime(),r={},i=JSON.stringify(r),s="GET";return new Promise((r,o)=>{wx.request({method:s,url:n,data:i,header:{"content-type":"text/plain"},success:function(n){return n.data&&n.data.statusCode||200!==n.statusCode?r("request error",e):r(t(n.data))},fail:function(e){return r("request error",e)}})})}initialize(){return this.emitter.removeAllListeners(),this.handshake().then(e=>{try{let t=this.connect(`wss://${this.config.host}/socket.io/1/websocket/`+e,{});console.log(t,"connectObj"),t.then(e=>{console.log(e,"res-res")})}catch(t){throw console.error({connectError:t}),t}}),this.on("close",()=>{console.log("连接已中断"),setTimeout(()=>this.initialize(),5e3)}),new Promise((e,t)=>{this.on("server_pub",e=>{switch(e.action){case"updateTable":this.onUpdateTable(e.tableName,e.data);break;case"updateRow":this.onUpdateRow(e.tableName,e.objectId,e.data);break;case"deleteTable":this.onDeleteTable(e.tableName,e.data);break;case"deleteRow":this.onDeleteRow(e.tableName,e.objectId,e.data);break}}),this.on("client_send_data",e=>{this.onInitListen()})})}onInitListen(){}connect(t,n){const r=Object.keys(n).map(e=>`${e}=${encodeURIComponent(n[e])}`).join("&"),o=t.indexOf("?")>-1?"&":"?";return t=[t,r].join(o),new Promise((r,o)=>{wx.onSocketOpen(r),wx.onSocketError(o),wx.onSocketMessage(t=>{try{let e=function(e){const{name:t,args:n}=JSON.parse(e);return{name:t,args:n}},n=t.data,r=n.slice(0,4);if("2:::"===r&&this.emit(!1,!0),n=n.slice(4),null===n||""===n)return;const{name:o,args:i}=e(n);let s=null==i?"":JSON.parse(i[0]);this.emitter.emit(o,s)}catch(e){console.log("Handle packet failed: "+t.data,e)}}),wx.onSocketClose(()=>this.emitter.emit("close")),wx.connectSocket({url:t,header:n})})}on(e,t){this.emitter.on(e,t)}emit(e,t){t=void 0===t?"5:::":"2:::",e=e?JSON.stringify(e):"",wx.sendSocketMessage({data:t+e})}emitData(e,t){return t=JSON.stringify(t),{name:e,args:[t]}}updateTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"updateTable"};t=this.emitData("client_sub",t),this.emit(t)}unsubUpdateTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"unsub_updateTable"};t=this.emitData("client_sub",t),this.emit(t)}updateRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"updateRow"};n=this.emitData("client_sub",n),this.emit(n)}unsubUpdateRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"unsub_updateRow"};n=this.emitData("client_sub",n),this.emit(n)}deleteTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"deleteTable"};t=this.emitData("client_sub",t),this.emit(t)}unsubDeleteTable(e){let t={appKey:this.applicationId,tableName:e,objectId:"",action:"unsub_deleteTable"};t=this.emitData("client_sub",t),this.emit(t)}deleteRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"deleteRow"};n=this.emitData("client_sub",n),this.emit(n)}unsubDeleteRow(e,t){let n={appKey:this.applicationId,tableName:e,objectId:t,action:"unsub_deleteRow"};n=this.emitData("client_sub",n),this.emit(n)}onUpdateTable(e,t){}onUpdateRow(e,t,n){}onDeleteTable(e,t){}onDeleteRow(e,t,n){}}},ad86:function(e,t,n){const r=n("79aa");let o=n("0a68"),i=n("bdcb");const s=(e,t,n,r)=>{let s="wechatApp";"nodejs"===o.type&&(s="cloudcode");const a=Math.round((new Date).getTime()/1e3);let c="get"===n||"delete"===n?"":JSON.stringify(r);const u=o.utils.randomString(),l=i.utf8MD5(t+a+e.securityCode+u+c+e.serverVersion);let f={"content-type":"application/json","X-Bmob-SDK-Type":s,"X-Bmob-Safe-Sign":l,"X-Bmob-Safe-Timestamp":a,"X-Bmob-Noncestr-Key":u,"X-Bmob-SDK-Version":e.serverVersion,"X-Bmob-Secret-Key":e.secretKey};return e.applicationMasterKey&&(f["X-Bmob-Master-Key"]=e.applicationMasterKey),f},a=(e,t="get",i={})=>new Promise((a,c)=>{void 0===o.User&&(o=n("0a68"));const u=s(o._config,e,t,i);var l=o.User.current();l&&(u["X-Bmob-Session-Token"]=l.sessionToken);const f=r.create({baseURL:o._config.host,headers:u,validateStatus:e=>e<500}),h={url:e,method:t};"get"===h.method?h.params=i:h.data=i,!0===o._config.deBug&&(console.log("host:",o._config.host),console.log("parma:",i)),f(h).then(({data:e})=>{(e.code&&e.error||e.error)&&c(e),a(e)}).catch(e=>{c(e)})});e.exports=a},b1dc:function(e,t,n){"use strict";var r=n("dd92");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},b1f3:function(e,t,n){"use strict";var r=n("45ad");e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},b3b4:function(e,t,n){(function(t){const r=n("0a68"),o=n("3726"),i=n("31e5"),s=n("8f1f"),a=n("a094"),c=n("59bb"),u=n("dedf"),l=n("a57c"),{generateCode:f,getAccessToken:h,sendWeAppMessage:p,refund:d,notifyMsg:m,functions:g,timestamp:w,requestPasswordReset:y,resetPasswordBySmsCode:b,updateUserPassword:v,geoPoint:S,checkMsg:E,push:x}=n("f336"),{requestSmsCode:_,verifySmsCode:D}=n("f3fe");r.GeoPoint=S,r.generateCode=f,r.getAccessToken=h,r.sendWeAppMessage=p,r.refund=d,r.checkMsg=E,r.notifyMsg=m,r.requestSmsCode=_,r.verifySmsCode=D,r.run=r.functions=g,r.timestamp=w,r.requestPasswordReset=y,r.resetPasswordBySmsCode=b,r.updateUserPassword=v,r.push=x,r.Pay=new u,r.User=new a,r.Socket=e=>new l(e),r.Query=e=>new s(e),r.File=(e,t)=>new c(e,t),r.request=n("f5a5"),r.type=r.utils.getAppType(),r.Pointer=e=>new o(e),r.Relation=e=>new i(e),"wx"===r.type?"undefined"!==typeof tt?tt.Bmob=r:wx.Bmob=r:"h5"===r.type?window.Bmob=r:("hap"===r.type||"nodejs"===r.type)&&(t.Bmob=r),e.exports=r}).call(this,n("c8ba"))},baa5:function(t,n,r){"use strict";var o=r("dd92"),i=r("b1f3"),s=r("0276"),a=r("9a82"),c=r("2faa"),u=r("45ad"),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||r("26ff");t.exports=function(t){return new Promise((function(n,f){var h=t.data,p=t.headers;o.isFormData(h)&&delete p["Content-Type"];var d=new XMLHttpRequest,m="onreadystatechange",g=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in d||c(t.url)||(d=new window.XDomainRequest,m="onload",g=!0,d.onprogress=function(){},d.ontimeout=function(){}),t.auth){var w=t.auth.username||"",y=t.auth.password||"";p.Authorization="Basic "+l(w+":"+y)}if(d.open(t.method.toUpperCase(),s(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d[m]=function(){if(d&&(4===d.readyState||g)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?d.response:d.responseText,o={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:e,config:t,request:d};i(n,f,o),d=null}},d.onerror=function(){f(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){f(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},o.isStandardBrowserEnv()){var b=r("9fdd"),v=(t.withCredentials||c(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;v&&(p[t.xsrfHeaderName]=v)}if("setRequestHeader"in d&&o.forEach(p,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)})),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(e){d&&(d.abort(),f(e),d=null)})),void 0===h&&(h=null),d.send(h)}))}},bdcb:function(e,t){function n(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function r(e,t){return e<<t|e>>>32-t}function o(e,t,o,i,s,a){return n(r(n(n(t,e),n(i,a)),s),o)}function i(e,t,n,r,i,s,a){return o(t&n|~t&r,e,t,i,s,a)}function s(e,t,n,r,i,s,a){return o(t&r|n&~r,e,t,i,s,a)}function a(e,t,n,r,i,s,a){return o(t^n^r,e,t,i,s,a)}function c(e,t,n,r,i,s,a){return o(n^(t|~r),e,t,i,s,a)}function u(e){for(var t=1732584193,r=-271733879,o=-1732584194,u=271733878,l=0;l<e.length;l+=16){var f=t,h=r,p=o,d=u;t=i(t,r,o,u,e[l+0],7,-680876936),u=i(u,t,r,o,e[l+1],12,-389564586),o=i(o,u,t,r,e[l+2],17,606105819),r=i(r,o,u,t,e[l+3],22,-1044525330),t=i(t,r,o,u,e[l+4],7,-176418897),u=i(u,t,r,o,e[l+5],12,1200080426),o=i(o,u,t,r,e[l+6],17,-1473231341),r=i(r,o,u,t,e[l+7],22,-45705983),t=i(t,r,o,u,e[l+8],7,1770035416),u=i(u,t,r,o,e[l+9],12,-1958414417),o=i(o,u,t,r,e[l+10],17,-42063),r=i(r,o,u,t,e[l+11],22,-1990404162),t=i(t,r,o,u,e[l+12],7,1804603682),u=i(u,t,r,o,e[l+13],12,-40341101),o=i(o,u,t,r,e[l+14],17,-1502002290),r=i(r,o,u,t,e[l+15],22,1236535329),t=s(t,r,o,u,e[l+1],5,-165796510),u=s(u,t,r,o,e[l+6],9,-1069501632),o=s(o,u,t,r,e[l+11],14,643717713),r=s(r,o,u,t,e[l+0],20,-373897302),t=s(t,r,o,u,e[l+5],5,-701558691),u=s(u,t,r,o,e[l+10],9,38016083),o=s(o,u,t,r,e[l+15],14,-660478335),r=s(r,o,u,t,e[l+4],20,-405537848),t=s(t,r,o,u,e[l+9],5,568446438),u=s(u,t,r,o,e[l+14],9,-1019803690),o=s(o,u,t,r,e[l+3],14,-187363961),r=s(r,o,u,t,e[l+8],20,1163531501),t=s(t,r,o,u,e[l+13],5,-1444681467),u=s(u,t,r,o,e[l+2],9,-51403784),o=s(o,u,t,r,e[l+7],14,1735328473),r=s(r,o,u,t,e[l+12],20,-1926607734),t=a(t,r,o,u,e[l+5],4,-378558),u=a(u,t,r,o,e[l+8],11,-2022574463),o=a(o,u,t,r,e[l+11],16,1839030562),r=a(r,o,u,t,e[l+14],23,-35309556),t=a(t,r,o,u,e[l+1],4,-1530992060),u=a(u,t,r,o,e[l+4],11,1272893353),o=a(o,u,t,r,e[l+7],16,-155497632),r=a(r,o,u,t,e[l+10],23,-1094730640),t=a(t,r,o,u,e[l+13],4,681279174),u=a(u,t,r,o,e[l+0],11,-358537222),o=a(o,u,t,r,e[l+3],16,-722521979),r=a(r,o,u,t,e[l+6],23,76029189),t=a(t,r,o,u,e[l+9],4,-640364487),u=a(u,t,r,o,e[l+12],11,-421815835),o=a(o,u,t,r,e[l+15],16,530742520),r=a(r,o,u,t,e[l+2],23,-995338651),t=c(t,r,o,u,e[l+0],6,-198630844),u=c(u,t,r,o,e[l+7],10,1126891415),o=c(o,u,t,r,e[l+14],15,-1416354905),r=c(r,o,u,t,e[l+5],21,-57434055),t=c(t,r,o,u,e[l+12],6,1700485571),u=c(u,t,r,o,e[l+3],10,-1894986606),o=c(o,u,t,r,e[l+10],15,-1051523),r=c(r,o,u,t,e[l+1],21,-2054922799),t=c(t,r,o,u,e[l+8],6,1873313359),u=c(u,t,r,o,e[l+15],10,-30611744),o=c(o,u,t,r,e[l+6],15,-1560198380),r=c(r,o,u,t,e[l+13],21,1309151649),t=c(t,r,o,u,e[l+4],6,-145523070),u=c(u,t,r,o,e[l+11],10,-1120210379),o=c(o,u,t,r,e[l+2],15,718787259),r=c(r,o,u,t,e[l+9],21,-343485551),t=n(t,f),r=n(r,h),o=n(o,p),u=n(u,d)}return[t,r,o,u]}function l(e){for(var t="0123456789abcdef",n="",r=0;r<4*e.length;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}function f(e){for(var t=1+(e.length+8>>6),n=new Array(16*t),r=0;r<16*t;r++)n[r]=0;for(r=0;r<e.length;r++)n[r>>2]|=(255&e.charCodeAt(r))<<r%4*8;return n[r>>2]|=128<<r%4*8,n[16*t-2]=8*e.length,n}function h(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;n++)t.push(e[n].charCodeAt(0));return new Uint8Array(t)}function p(e){"string"==typeof e&&(e=h(e));for(var t=1+(e.length+8>>6),n=new Array(16*t),r=0;r<16*t;r++)n[r]=0;for(r=0;r<e.length;r++)n[r>>2]|=(255&e[r])<<r%4*8;return n[r>>2]|=128<<r%4*8,n[16*t-2]=8*e.length,n}function d(e){return l(u(p(e)))}function m(e){return l(u(f(e)))}e.exports={hexMD5:m,utf8MD5:d}},c4fd:function(e,t){function n(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&n(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},ce9c:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},d357:function(e,t,n){"use strict";var r=n("dd92"),o=n("793e"),i=n("0c10"),s=n("e26f"),a=n("ce9c"),c=n("94a7");function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){u(e),e.baseURL&&!a(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||s.adapter;return t(e).then((function(t){return u(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(u(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},dc91:function(e,t){class n{constructor(e,t){let n=new Error;return n.code=e,n.message=t?`Bmob.Error:{code:${e}, message:${t}}`:`Bmob.Error:{code:${e}, message:${this.errorMsg(e)}}`,n}errorMsg(e){switch(e){case 415:return"incorrect parameter type.";case 416:return"Parameter is null.";case 417:return"There is no upload content.";case 418:return"Log in failure.";case 419:return"Bmob.GeoPoint location error.";default:return"unknown error"}}}e.exports=n},dd92:function(e,t,n){"use strict";var r=n("2a0b"),o=n("c4fd"),i=Object.prototype.toString;function s(e){return"[object Array]"===i.call(e)}function a(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return"undefined"!==typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function l(e){return"string"===typeof e}function f(e){return"number"===typeof e}function h(e){return"undefined"===typeof e}function p(e){return null!==e&&"object"===typeof e}function d(e){return"[object Date]"===i.call(e)}function m(e){return"[object File]"===i.call(e)}function g(e){return"[object Blob]"===i.call(e)}function w(e){return"[object Function]"===i.call(e)}function y(e){return p(e)&&w(e.pipe)}function b(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function S(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function E(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function x(){var e={};function t(t,n){"object"===typeof e[n]&&"object"===typeof t?e[n]=x(e[n],t):e[n]=t}for(var n=0,r=arguments.length;n<r;n++)E(arguments[n],t);return e}function _(e,t,n){return E(t,(function(t,o){e[o]=n&&"function"===typeof t?r(t,n):t})),e}e.exports={isArray:s,isArrayBuffer:a,isBuffer:o,isFormData:c,isArrayBufferView:u,isString:l,isNumber:f,isObject:p,isUndefined:h,isDate:d,isFile:m,isBlob:g,isFunction:w,isStream:y,isURLSearchParams:b,isStandardBrowserEnv:S,forEach:E,merge:x,extend:_,trim:v}},dedf:function(e,t,n){const r=n("f5a5"),o=n("0a68"),i=n("dc91");class s{weApp(e,t,n){let s=wx.getStorageSync("openid");if(!e||!t||!n||!s)throw new i(416);let a={order_price:e,product_name:t,body:n,open_id:s,pay_type:4},c=o._config.parameters.PAY;return r(c,"post",a)}}e.exports=s},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(o(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===i(e,-1);return e=n(o(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var u=[];for(c=a;c<o.length;c++)u.push("..");return u=u.concat(i.slice(a)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(t=e.charCodeAt(i),47===t){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(o=!1,r=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=s+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e26f:function(t,n,r){"use strict";(function(n){var o=r("dd92"),i=r("b1dc"),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function c(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof n)&&(e=r("baa5")),e}var u={adapter:c(),transformRequest:[function(e,t){return i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){u.headers[e]=o.merge(s)})),t.exports=u}).call(this,r("4362"))},f336:function(e,t,n){const r=n("f5a5"),o=n("0a68"),i=n("dc91"),{isObject:s,isString:a}=n("2816"),c=e=>{if(!s(e))throw new i(415);let t=o._config.parameters.GENERATECODE;return r(t,"post",e)},u=()=>{let e=o._config.parameters.GETACCESSTOKEN;return r(e,"get")},l=e=>{if(!s(e))throw new i(415);let t=o._config.parameters.SENDWEAPPMESSAGE;return r(t,"post",e)},f=e=>{if(!s(e))throw new i(415);let t=o._config.parameters.REFUND;return r(t,"post",e)},h=e=>{if(!s(e))throw new i(415);let t=o._config.parameters.NOTIFYMSG;return r(t,"post",e)},p=e=>{if(!s(e))throw new i(415);let t=o._config.parameters.REQUESTPASSWORDRESET;return r(t,"post",e)},d=(e,t)=>{if(!a(e))throw new i(415);let n=`${o._config.parameters.RESETPASSWORDBYSMSCODE}/${e}`;return r(n,"put",t)},m=(e,t)=>{if(!s(t)||!a(e))throw new i(415);let n=`${o._config.parameters.UPDATEUSERPASSWORD}/${e}`;return r(n,"put",t)},g=e=>{if(!a(e))throw new i(415);let t=""+o._config.parameters.CHECK_MSG;const n={content:e};return r(t,"post",n)},w=()=>{let e=o._config.parameters.TIMESTAMP;return r(e,"get")},y=e=>{if(!s(e))throw new i(415);let t=o._config.parameters.PUSH;return r(t,"post",e)},b=(e,t)=>{if(t||(t={}),!a(e))throw new i(415);const n=`${o._config.parameters.FUNCTIONS}/${e}`;return new Promise((e,o)=>{r(n,"post",t).then(({result:t})=>{try{e(JSON.parse(t))}catch(n){e(t)}}).catch(e=>{o(e)})})},v=({latitude:e,longitude:t})=>{const n=(e,t)=>{if(e<-90)throw new i(419);if(e>90)throw new i(419);if(t<-180)throw new i(419);if(t>180)throw new i(419);return{latitude:e,longitude:t}};return n(e,t),{__type:"GeoPoint",latitude:e,longitude:t}};e.exports={generateCode:c,getAccessToken:u,sendWeAppMessage:l,refund:f,notifyMsg:h,functions:b,timestamp:w,requestPasswordReset:p,resetPasswordBySmsCode:d,updateUserPassword:m,geoPoint:v,checkMsg:g,push:y}},f3fe:function(e,t,n){const r=n("f5a5"),o=n("0a68"),i=n("dc91"),{isObject:s,isString:a}=n("2816"),c=(e,t)=>{if(!s(e))throw new i(415);let n=o._config.parameters.REQUESTSMSCODE;return r(n,"post",e)},u=(e,t,n)=>{if(!a(e))throw new i(415);if(!s(t))throw new i(415);let c=`${o._config.parameters.VERIFYSMSCODE}/${e}`;return r(c,"post",t)};e.exports={requestSmsCode:c,verifySmsCode:u}},f5a5:function(e,t,n){const r=n("1deb");let o;const i=r.getAppType();"h5"===i?o=n("ad86"):"wx"===i?o=n("8858"):"hap"===i?o=n("41f3"):"nodejs"===i&&(o=n("ad86")),e.exports=o},fbc7:function(e,t,n){"use strict";var r=n("dd92");function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},fd6c:function(t,n,r){let o,i;try{o=r("ff34"),i="v"+o.version}catch(e){i="v1.0.0"}const s="https://api.bmobcloud.com",a="",c="",u="",l=3,f={GENERATECODE:"/1/wechatApp/qr/generatecode",GETACCESSTOKEN:"/1/wechatApp/getAccessToken",SENDWEAPPMESSAGE:"/1/wechatApp/SendWeAppMessage",NOTIFYMSG:"/1/wechatApp/notifyMsg",REFUND:"/1/pay/refund",REQUESTSMSCODE:"/1/requestSmsCode",VERIFYSMSCODE:"/1/verifySmsCode",FUNCTIONS:"/1/functions",REQUESTPASSWORDRESET:"/1/requestPasswordReset",RESETPASSWORDBYSMSCODE:"/1/resetPasswordBySmsCode",UPDATEUSERPASSWORD:"/1/updateUserPassword",PUSH:"/1/push",FILES:"/2/files",FILESCHECK:"/1/wechatApp/checkImg",DELFILES:"/2/cdnBatchDelete",TIMESTAMP:"/1/timestamp",LOGIN:"/1/login",REGISTER:"/1/users",REQUEST_EMAIL_VERIFY:"/1/requestEmailVerify",USERS:"/1/users",PAY:"/1/pay",WECHAT_APP:"/1/wechatApp/",BATCH:"/1/batch",CHECK_MSG:"/1/wechatApp/checkMsg",DECRYPTION:"/1/wechatApp/decryption",QUERY:"/1/classes"};t.exports={host:s,secretKey:a,securityCode:c,applicationMasterKey:u,parameters:f,version:i,serverVersion:10,deBug:!1,type:l}},ff34:function(e){e.exports=JSON.parse('{"name":"hydrogen-js-sdk","version":"2.2.4","description":"Bmob SDK","main":"./index.js","typings":"./index.d.ts","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1","build":"webpack --config config/prod.env.js","watch":"webpack --watch --config config/prod.env.js","dev":"webpack-dev-server --config config/dev.env.js"},"repository":{"type":"git","url":"git+https://github.com/bmob/hydrogen-js-sdk.git"},"author":"Bmob","license":"ISC","bugs":{"url":"https://github.com/bmob/hydrogen-js-sdk/issues"},"homepage":"https://github.com/bmob/hydrogen-js-sdk#readme","dependencies":{"babel-runtime":"^6.26.0","node.extend":"^2.0.0","webpack":"^3.12.0"},"devDependencies":{"babel-core":"^6.26.3","babel-loader":"^7.1.5","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","clean-webpack-plugin":"^0.1.19","eslint":"^4.19.1","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.12.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.1.0","html-webpack-plugin":"^2.30.1","uglifyjs-webpack-plugin":"^1.2.5","webpack-dev-server":"^2.11.2"},"directories":{"doc":"docs"},"keywords":["Bmob"]}')}}]);