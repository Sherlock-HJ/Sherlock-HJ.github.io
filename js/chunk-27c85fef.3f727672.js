(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27c85fef"],{"159b":function(t,e,n){var s=n("da84"),a=n("fdbc"),o=n("17c2"),c=n("9112");for(var i in a){var r=s[i],l=r&&r.prototype;if(l&&l.forEach!==o)try{c(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,n){"use strict";var s=n("b727").forEach,a=n("b301");t.exports=a("forEach")?function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},a15b:function(t,e,n){"use strict";var s=n("23e7"),a=n("44ad"),o=n("fc6a"),c=n("b301"),i=[].join,r=a!=Object,l=c("join",",");s({target:"Array",proto:!0,forced:r||l},{join:function(t){return i.call(o(this),void 0===t?",":t)}})},a1bb:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ADGenerate"},[n("Row",{attrs:{gutter:16}},[n("Col",{attrs:{span:"12"}},[n("Input",{attrs:{placeholder:"广告名称前缀（或是渠道名）"},model:{value:t.channelName,callback:function(e){t.channelName=e},expression:"channelName"}},[n("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.platform,callback:function(e){t.platform=e},expression:"platform"}},[n("Option",{attrs:{value:"adnet"}},[t._v("优亮汇")]),n("Option",{attrs:{value:"baidu"}},[t._v("百度")]),n("Option",{attrs:{value:"sogou"}},[t._v("搜狗")])],1),n("Button",{attrs:{slot:"append",type:"primary"},on:{click:t.prepareAction},slot:"append"},[t._v("预创建")])],1),n("Button",{attrs:{type:t.wsStatus,loading:t.wsLoading},on:{click:t.wsAction}},[t.wsLoading?n("span",[t._v("连接中...")]):n("span",[t._v(t._s(t.wsStatus)+"!")])]),n("Select",{staticStyle:{width:"180px"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}},[n("Option",{attrs:{value:"shanglujunshi"}},[t._v("shanglujunshi")]),n("Option",{attrs:{value:"zizaiyangsheng"}},[t._v("zizaiyangsheng")]),n("Option",{attrs:{value:"nanxunwang"}},[t._v("nanxunwang")])],1)],1),n("Col",{attrs:{span:"12"}},[n("ADLocation",{model:{value:t.adLocs,callback:function(e){t.adLocs=e},expression:"adLocs"}})],1)],1),n("Row",[n("Input",{attrs:{type:"textarea",rows:20},model:{value:t.prepareStr,callback:function(e){t.prepareStr=e},expression:"prepareStr"}})],1),n("Row",[n("Button",{attrs:{type:"primary"},on:{click:t.createAction}},[t._v("创建")])],1)],1)},a=[],o=(n("a15b"),n("ac1f"),n("1276"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex"}},[n("Checkbox",{attrs:{indeterminate:t.indeterminate,value:t.checkAll},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAll(e)}}},[t._v("全选 ")]),n("CheckboxGroup",{on:{"on-change":t.checkAllGroupChange},model:{value:t.checkAllGroup,callback:function(e){t.checkAllGroup=e},expression:"checkAllGroup"}},t._l(t.boxKeys,(function(e){return n("div",{key:e},[n("Checkbox",{attrs:{label:e}},[t._v(t._s(t.boxs[e].text))]),n("InputNumber",{attrs:{min:1,max:t.boxs[e].stop,size:"small"},model:{value:t.boxs[e].start,callback:function(n){t.$set(t.boxs[e],"start",n)},expression:"boxs[key].start"}}),t._v(" - "),n("InputNumber",{attrs:{max:30,min:1,size:"small"},model:{value:t.boxs[e].stop,callback:function(n){t.$set(t.boxs[e],"stop",n)},expression:"boxs[key].stop"}})],1)})),0)],1)}),c=[],i=(n("b64b"),{name:"ADLocation",data:function(){return{indeterminate:!1,checkAll:!0,checkAllGroup:[],boxs:{shou:{text:"首页",start:1,stop:16,seg:1},lie:{text:"列表页",start:1,stop:9,seg:1},nei:{text:"内容页",start:1,stop:26,seg:4}}}},computed:{boxKeys:function(){return Object.keys(this.boxs)}},watch:{checkAllGroup:function(t){var e=this,n=[];t.forEach((function(t){e.boxs[t].start&&e.boxs[t].stop&&n.push(e.boxs[t])})),this.$emit("input",n)}},methods:{handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup=Object.keys(this.boxs):this.checkAllGroup=[]},checkAllGroupChange:function(t){3===t.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)}},created:function(){this.checkAllGroup=Object.keys(this.boxs)}}),r=i,l=n("2877"),u=Object(l["a"])(r,o,c,!1,null,"44d9497a",null),h=u.exports,p={name:"ADGenerate",components:{ADLocation:h},data:function(){return{ws:null,platform:"",channelName:"",prepareStr:"",adLocs:[],wsLoading:!1,wsStatus:"dashed",account:""}},methods:{createAction:function(){if("success"!==this.wsStatus)return this.$Message.warning("服务已经断开！请重连"),null;this.send(this.platform+"Add")},send:function(t){var e={names:this.prepareStr.split("\n"),account:this.account},n={func:t,body:e};this.ws.send(JSON.stringify(n))},wsAction:function(){var t=this;this.$ctrl.get("/app").then((function(){})),"success"!==this.wsStatus&&this.$ctrl.get("/ctrl").then((function(){t.openWs()}))},prepareAction:function(){var t=this;if(this.channelName){this.prepareStr="";var e=[];this.adLocs.forEach((function(n){for(var s=n.start;s<=n.stop;s++){var a="";"adnet"===t.platform&&(a=","+t.adnetType(s,n.seg)),e.push(t.channelName+n.text+s+a)}})),this.prepareStr=e.join("\n")}},adnetType:function(t,e){if(t<=e)return 10;var n=Math.floor(3*Math.random());return 0===n?4:1===n?10:2===n?9:void 0},openWs:function(){var t=this;this.wsLoading=!0,this.ws=new WebSocket("ws://localhost:8765"),this.ws.onopen=function(){t.wsLoading=!1,t.wsStatus="success"},this.ws.onclose=function(e){console.log(e),t.wsStatus="warning",t.closeNum<3&&t.openWs(),t.closeNum++},this.ws.onerror=function(e){console.log(e),t.wsStatus="error",t.errorNum<3&&t.openWs(),t.errorNum++},this.ws.onmessage=function(t){console.log(t.data)}}},created:function(){this.errorNum=0,this.closeNum=0,this.openWs()},destroyed:function(){this.ws.close()}},f=p,d=(n("ccb4"),Object(l["a"])(f,s,a,!1,null,"7763f2c4",null));e["default"]=d.exports},b64b:function(t,e,n){var s=n("23e7"),a=n("7b0b"),o=n("df75"),c=n("d039"),i=c((function(){o(1)}));s({target:"Object",stat:!0,forced:i},{keys:function(t){return o(a(t))}})},b727:function(t,e,n){var s=n("f8c2"),a=n("44ad"),o=n("7b0b"),c=n("50c4"),i=n("65f0"),r=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,u=4==t,h=6==t,p=5==t||h;return function(f,d,b,m){for(var v,k,x=o(f),g=a(x),w=s(d,b,3),S=c(g.length),L=0,A=m||i,y=e?A(f,S):n?A(f,0):void 0;S>L;L++)if((p||L in g)&&(v=g[L],k=w(v,L,x),t))if(e)y[L]=k;else if(k)switch(t){case 3:return!0;case 5:return v;case 6:return L;case 2:r.call(y,v)}else if(u)return!1;return h?-1:l||u?u:y}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},cbc0:function(t,e,n){},ccb4:function(t,e,n){"use strict";var s=n("cbc0"),a=n.n(s);a.a},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);